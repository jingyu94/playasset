# 16. 관리자 인증/권한/유료호출정책 가이드 (2026)

## 1) 기본 로그인 계정
- 관리자: `admin / admin`
- 일반 사용자(샘플): `demo@playasset.ai / demo1234`

## 2) 인증 방식
- `POST /api/v1/auth/login` 으로 토큰 발급
- 이후 모든 `/api/v1/**` 요청(로그인 제외)은 `Authorization: Bearer <token>` 필수
- `GET /api/v1/auth/me`로 현재 사용자/권한 확인
- `POST /api/v1/auth/logout`로 세션 만료

## 3) 권한 모델
- `ADMIN`: 운영 정책/사용자 권한 관리 가능
- `USER`: 일반 투자/대시보드 API 사용
- `OPERATOR`: 운영 확장용 예약 역할

## 4) 관리자 API
- 정책 조회: `GET /api/v1/admin/paid-services/policies`
- 정책 수정: `PUT /api/v1/admin/paid-services/policies/{serviceKey}`
- 사용자 목록: `GET /api/v1/admin/users`
- 사용자 역할 변경: `PUT /api/v1/admin/users/{userId}/roles`

## 5) 유료 호출 정책 적용 대상
- `DASHBOARD_READ`
- `POSITIONS_READ`
- `WATCHLIST_READ`
- `ALERTS_READ`
- `PORTFOLIO_ADVICE`
- `PORTFOLIO_SIMULATION`
- `MARKET_BATCH_REFRESH`
- `NEWS_BATCH_REFRESH`

## 6) 동작 규칙
- 정책은 `paid_service_policies`에 저장
- 일일 사용량은 `paid_service_daily_usage`에 누적
- 한도 초과 시 `429 PAYWALL_LIMIT_EXCEEDED` 반환
- 관리자 페이지에서 서비스별 `enabled`/`dailyLimit` 즉시 변경 가능

## 7) 프론트 반영
- 로그인 페이지 신설
- 관리자 권한 사용자만 하단 `관리자` 탭 노출
- 관리자 탭에서
  - 서비스별 일일 최대 호출수 변경
  - 활성/비활성 토글
  - 사용자 역할(USER/OPERATOR/ADMIN) 변경 가능
