CREATE DATABASE PLAYASSET;
USE PLAYASSET;

CREATE TABLE TM_MY_STOCK
(
  STOCK_ID VARCHAR(50) NOT NULL COMMENT '주식종목 아이디',
  USER_ID  VARCHAR(50) NOT NULL COMMENT '회원 ID',
  REG_ID   VARCHAR(50) NOT NULL COMMENT '등록자 ID',
  REG_DTM  DATE        NOT NULL COMMENT '등록시간',
  UDT_ID   VARCHAR(50) NOT NULL COMMENT '수정자 ID',
  UDT_DTM  DATE        NOT NULL COMMENT '수정시간'
) COMMENT '회원별 관심종목 관리';

CREATE TABLE TM_STOCK_KEYWORD
(
  STOCK_ID      VARCHAR(50)  NOT NULL COMMENT '주식종목 아이디',
  STOCK_KEYWORD VARCHAR(100) NOT NULL COMMENT '주식종목 검색어',
  REG_ID        VARCHAR(50)  NOT NULL COMMENT '등록자 ID',
  REG_DTM       DATE         NOT NULL COMMENT '등록시간',
  UDT_ID        VARCHAR(50)  NOT NULL COMMENT '수정자 ID',
  UDT_DTM       DATE         NOT NULL COMMENT '수정시간',
  PRIMARY KEY (STOCK_KEYWORD)
) COMMENT '주식종목별 검색어 관리';

CREATE TABLE TM_STOCK
(
  STOCK_ID   VARCHAR(50)  NOT NULL COMMENT '주식종목 아이디',
  STOCK_NAME VARCHAR(100) NOT NULL COMMENT '주식종목 이름',
  SRCH_TAG   VARCHAR(100) NULL     COMMENT '검색태그',
  REG_ID     VARCHAR(50)  NOT NULL COMMENT '등록자 ID',
  REG_DTM    DATE         NOT NULL COMMENT '등록시간',
  UDT_ID     VARCHAR(50)  NOT NULL COMMENT '수정자 ID',
  UDT_DTM    DATE         NOT NULL COMMENT '수정시간',
  PRIMARY KEY (STOCK_ID)
) COMMENT '주식종목정보 관리';

CREATE TABLE TM_USER
(
  USER_ID       VARCHAR(50)  NOT NULL COMMENT '회원 ID',
  USER_PASSWORD VARCHAR(100) NOT NULL COMMENT '회원 비밀번호',
  USER_NAME     VARCHAR(50)  NOT NULL COMMENT '회원 이름',
  USER_CP       VARCHAR(15)  NULL     COMMENT '회원 휴대전화번호',
  REG_ID        VARCHAR(50)  NOT NULL COMMENT '등록자 ID',
  REG_DTM       DATE         NOT NULL COMMENT '등록시간',
  UDT_ID        VARCHAR(50)  NOT NULL COMMENT '수정자 ID',
  UDT_DTM       DATE         NOT NULL COMMENT '수정시간',
  PRIMARY KEY (USER_ID)
) COMMENT '회원정보 관리';

ALTER TABLE TM_MY_STOCK
  ADD CONSTRAINT FK_TM_STOCK_TO_TM_MY_STOCK
    FOREIGN KEY (STOCK_ID)
    REFERENCES TM_STOCK (STOCK_ID);

ALTER TABLE TM_MY_STOCK
  ADD CONSTRAINT FK_TM_USER_TO_TM_MY_STOCK
    FOREIGN KEY (USER_ID)
    REFERENCES TM_USER (USER_ID);

ALTER TABLE TM_STOCK_KEYWORD
  ADD CONSTRAINT FK_TM_STOCK_TO_TM_STOCK_KEYWORD
    FOREIGN KEY (STOCK_ID)
    REFERENCES TM_STOCK (STOCK_ID);
